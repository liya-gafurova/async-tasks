<!DOCTYPE html>



<div>

    <h1>WebSocket Notifications</h1>


    <form name="user">
        <input type="text" name="user_id"/>
        <input type="submit" value="Send">
    </form>

    <div id="messages">

    </div>

</div>

<script>

    let ws = new WebSocket(`ws://localhost:8000/ws`);
    ws.onmessage = function (){
        let incomingMessage = event.data;
        showMessage(incomingMessage);
    };


    document.forms.user.onsubmit = function () {
        var user_id = this.user_id.value
        ws.send(JSON.stringify({
            "user_id": user_id,
            "action": "subscribe"
        }))
        return false;
    };

     // отображение информации в div#messages
    function showMessage(message) {
        let messageElem = document.createElement('div');
        messageElem.textContent = message;
        document.getElementById('messages').prepend(messageElem);
    }
</script>
